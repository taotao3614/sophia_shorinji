<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>設定 - 上智大学少林寺拳法部</title>
  <link rel="stylesheet" href="./css/style.css">
  <script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <div class="header">
    <h1>設定</h1>
    <p>アプリケーション設定</p>
  </div>

  <div class="container">
    <div class="card">
      <div class="card-title">👤 ユーザー情報</div>
      <div class="card-description">
        <p><strong>表示名:</strong> <span id="user-display-name">読み込み中...</span></p>
        <p><strong>ユーザーID:</strong> <span id="user-id">読み込み中...</span></p>
      </div>
    </div>

    <div class="card">
      <div class="card-title">ℹ️ アプリ情報</div>
      <div class="card-description">
        <p><strong>バージョン:</strong> 1.0.0 (Beta)</p>
        <p><strong>最終更新:</strong> 2025年1月</p>
        <p><strong>環境:</strong> <span id="liff-env">読み込み中...</span></p>
      </div>
    </div>

    <div class="card">
      <div class="card-title">🔧 管理者専用</div>
      <div class="card-description">
        管理者向けの設定機能（今後実装予定）
      </div>
      <button class="btn btn-secondary" disabled>管理画面（準備中）</button>
    </div>
  </div>

  <div class="footer">
    <p>&copy; 2025 上智大学少林寺拳法部</p>
  </div>

  <script src="./js/common.js"></script>
  <script>
    async function initPage() {
      showLoading();
      try {
        await initializeLiff();

        const profile = await getUserProfile();
        if (profile) {
          document.getElementById('user-display-name').textContent = profile.displayName;
          document.getElementById('user-id').textContent = profile.userId;
        }

        const env = liff.isInClient() ? 'LINE アプリ内' : 'ブラウザ';
        document.getElementById('liff-env').textContent = env;

      } catch (error) {
        console.error('初期化エラー:', error);
        showAlert('ページの初期化に失敗しました', 'error');
      } finally {
        hideLoading();
      }
    }

    window.addEventListener('load', initPage);
  </script>
</body>
</html>
